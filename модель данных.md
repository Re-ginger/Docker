## Бизнес-задача
Мы создаем базу данных для интернет-магазина, в которой нужно эффективно хранить информацию о клиентах и их адресах. Важно учитывать, что у одного клиента может быть несколько адресов, например, для доставки в разные места. Поэтому нам нужно сделать структуру данных гибкой и расширяемой, чтобы поддерживать разные форматы адресов и работу с международными заказами.

Основные сущности, которые я выделил:
### 1. Клиенты (Customers):

Храним информацию о клиенте: имя, фамилия, пол, дата рождения и т.д.\
Например, есть отдельные поля для имени, фамилии, титула (Mr, Mrs) и предпочтительного языка общения.
Атрибуты:
- **customer_id**: уникальный идентификатор клиента.
- **first_name, last_name**: имя и фамилия.
- **title**: титул (Mr, Mrs, Dr).
- **correspondence_language**: предпочитаемый язык.
- **birth_date**: дата рождения.
- **gender**: пол.
- **marital_status**: семейное положен
```sql
mysql> SELECT * FROM Customers limit 5;
+-------------+-------+------------+-----------+-------------------------+------------+---------+----------------+
| Customer_ID | Title | First_Name | Last_Name | Correspondence_Language | Birth_Date | Gender  | Marital_Status |
+-------------+-------+------------+-----------+-------------------------+------------+---------+----------------+
|           1 | Dr.   | Danilo     | Ambrosini | IT                      | 1900-01-01 | Unknown |                |
|           2 | Dr.   | Danilo     | Ambrosini | IT                      | 1900-01-01 | Unknown |                |
|           3 | Mrs   | Deborah    | Thomas    | NULL                    | NULL       | Female  |                |
|           4 | Herr  | Markus     | Hnninge   | DE                      | 1900-01-01 | Male    |                |
|           5 | Mrs   | Sheila     | Spiller   | EN                      | NULL       | Unknown |                |
+-------------+-------+------------+-----------+-------------------------+------------+---------+----------------+
5 rows in set (0.00 sec)
```

### 2. Страны (Countries):

У каждой страны есть свой уникальный код (например, GB, IT) и название.\
Использование отдельной таблицы для стран позволяет избежать дублирования данных. Если страна используется в нескольких записях, информация о ней хранится только в одном месте, что упрощает обновление и поддержание данных.
- **country_id**: уникальный идентификатор страны.
- **country_code**: код страны (например, GB, IT, DE).
- **country_name**: полное название страны.

```sql
mysql> SELECT * FROM Countries;
+------------+----------------+--------------+
| Country_ID | Country_Name   | Country_Code |
+------------+----------------+--------------+
|          1 | Italy          | IT           |
|          2 | Italy          | IT           |
|          3 | United Kingdom | GB           |
|          4 | Germany        | DE           |
+------------+----------------+--------------+
4 rows in set (0.00 sec)
```
### 3. Города (Cities):

В этой таблице храним города, в которых живут клиенты.\
Разделение городов на отдельную таблицу позволяет избежать дублирования информации и упрощает обновление информации о городе. Это также помогает в поддержке связей с другими таблицами, такими как таблица стран.
- **city_id**: уникальный идентификатор города.
- **city_name**: название города.
- **country_id**: идентификатор страны (связь с таблицей countries).
```sql
mysql> SELECT * FROM Cities;
+---------+-----------------------------+-----------+------------+
| City_ID | City_Name                   | Region_ID | Country_ID |
+---------+-----------------------------+-----------+------------+
|       1 | Varese                      |         1 |          1 |
|       2 | Haywards Heath              |      NULL |          3 |
|       3 | Crowborough                 |      NULL |          3 |
|       4 | Beccles                     |      NULL |          3 |
|       5 | Denny                       |      NULL |          3 |
|       6 | Hirschberg an der Bergstrae |      NULL |          4 |
+---------+-----------------------------+-----------+------------+
6 rows in set (0.00 sec)
```
### 4. Улицы (Streets):

Здесь записываем названия улиц.\
Связываем их с городами.
- **street_id**: уникальный идентификатор улицы.
- **street_name**: название улицы.
- **city_id**: идентификатор города (связь с таблицей cities).
```sql
mysql> SELECT * FROM Streets;
+-----------+---------------+---------+
| Street_ID | Street_Name   | City_ID |
+-----------+---------------+---------+
|         1 | Via dolomiti  |       1 |
|         2 | Via Dolomiti  |       1 |
|         3 | Cobbetts Mead |       2 |
|         4 | Ghyll Road    |       3 |
|         5 | Pepys Avenue  |       4 |
|         6 | Leslie Park   |       5 |
|         7 | Breitgasse 5a |       6 |
+-----------+---------------+---------+
7 rows in set (0.00 sec)
```
### 5. Дома (Buildings):

Храним данные о домах — номер здания и его местоположение.\
Отдельная таблица для зданий позволяет легко управлять данными о зданиях и связывать их с другими сущностями, такими как улицы и адреса.
- **building_id**: уникальный идентификатор здания (PRIMARY KEY).
- **building_number**: номер здания.
- **street_id**: идентификатор улицы, на которой находится здание (FOREIGN KEY).
```sql
mysql> SELECT * FROM Buildings;
+-------------+-----------------+-----------+
| building_id | building_number | street_id |
+-------------+-----------------+-----------+
|           1 | 13              |         1 |
|           2 | 31              |         2 |
+-------------+-----------------+-----------+
2 rows in set (0.00 sec)
```
### 6. Адреса клиентов (Addresses):

Разделение адресов на отдельную таблицу позволяет хранить информацию о нескольких адресах для одного клиента и связывать эти адреса с другими таблицами.\
- address_id: уникальный идентификатор адреса (PRIMARY KEY).
- customer_id: идентификатор клиента (FOREIGN KEY).
building_id: идентификатор здания (FOREIGN KEY).
postal_code: почтовый индекс.
city_id: идентификатор города (FOREIGN KEY).
region_id: идентификатор региона (FOREIGN KEY).
```sql
mysql> SELECT * FROM Addresses;
+------------+-------------+-----------+-----------------+-------------+-----------+
| address_id | customer_id | building_id | postal_code     | city_id     | region_id |
+------------+-------------+-----------+-----------------+-------------+-----------+
|          1 |           1 |         1 | 21100           |         1   |       NULL|
|          2 |           3 |         2 | RH16 3TQ        |         2   |       NULL|
|          3 |           4 |         3 | 69493           |         3   |       NULL|
|          4 |           5 |         4 | TN6 1ST         |         4   |       NULL|
|          5 |           6 |         5 | NR34 7SH        |         5   |       NULL|
+------------+-------------+-----------+-----------------+-------------+-----------+
5 rows in set (0.00 sec)

```
Дополнительные сущности:
### 7. Регионы (Regions):

Таблица Regions предназначена для хранения информации о регионах или областях внутри стран.\
Это позволяет более детально структурировать адреса, особенно в странах, где адреса могут включать информацию о регионе или области.
- **region_id: уникальный идентификатор региона.
- **region_name**: название региона.
- **country_id**: идентификатор страны, к которой относится регион (связь с таблицей Countries).

```sql
mysql> SELECT * FROM Regions;
+-----------+-------------+------------+
| Region_ID | Region_Name | Country_ID |
+-----------+-------------+------------+
|         1 | Lombardy    |          1 |
|         3 | East Sussex |          2 |
+-----------+-------------+------------+
3 rows in set (0.00 sec)

```


## Вывод

Нормализация данных позволяет избежать дублирования и упрощает обновление информации. Например, один и тот же город сохраняется только один раз в базе данных, что делает управление данными более эффективным. Созданная структура данных обеспечивает гибкость и масштабируемость для управления клиентами и их адресами, поддерживает работу с международными заказами и различными форматами адресов.

